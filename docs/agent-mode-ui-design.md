# Agent 模式 UI 设计文档

## 1. 界面整合

### 1.1 模式切换
- 在现有的命令模式/上下文模式切换组中添加 Agent 模式选项
- 保持 Radio.Group 组件风格，位置不变
- 切换选项：
  * 命令模式（默认）：单次命令生成和执行
  * 上下文模式：带终端输出的对话
  * Agent 模式：任务拆解和自动执行

### 1.2 共用元素
- 复用现有的消息展示区域
- 复用现有的输入框（用于输入任务目标）
- 复用现有的按钮样式和布局
- 保持现有的深色/浅色主题支持

### 1.3 Agent 模式特有元素
```
+------------------------+
| [用户输入框-输入任务]
+------------------------+
| [模式切换组]
+------------------------+
| 任务执行区域
|
| 📋 任务目标：xxx
|
| 🤖 任务分析：
| [任务拆解步骤列表]
|
| 当前步骤（1/N）：
| [步骤描述]
| ```command
| xxx
| ```
| [执行] [跳过] [暂停]
|
| 执行状态：
| [状态指示器]
|
| 阶段总结：
| [当前步骤的执行结果和分析]
+------------------------+
```

## 2. 交互增强

### 2.1 状态展示
- 在现有消息气泡基础上增加状态标识：
  * 任务分析图标
  * 步骤进度标签
  * 执行状态指示

### 2.2 任务控制
- 复用现有的命令执行和复制功能
- 新增任务控制：
  * 暂停/继续按钮
  * 跳过当前步骤
  * 终止整个任务
  * 修改执行计划
  * 确认或调整建议

### 2.3 上下文处理
- 保持完整任务历史
- 记录每个步骤的执行结果
- 支持回溯和修改执行路径
- 允许用户随时介入和调整

## 3. 视觉整合

### 3.1 样式复用
- 使用现有的消息气泡样式
- 保持现有的代码块样式
- 保持现有的按钮风格
- 复用现有的间距和留白

### 3.2 新增样式
- 任务进度展示
- 步骤状态标签：
  * 分析中：蓝色底纹
  * 执行中：黄色底纹
  * 已完成：绿色底纹
  * 已跳过：灰色底纹
  * 出错：红色底纹
- 任务树形结构展示
- 步骤间关系连线

### 3.3 动效复用
- 复用消息加载动效
- 复用按钮点击效果
- 复用过渡动画
- 新增步骤切换动效

## 4. 响应式适配

### 4.1 布局复用
- 保持现有的自适应布局
- 保持现有的滚动行为
- 保持现有的移动端适配

### 4.2 特殊处理
- 在窄屏下优化任务树展示
- 合并部分控制按钮
- 可折叠任务详情面板

## 5. 注意事项

1. 确保任务目标清晰展示
2. 保持执行过程可控
3. 提供充分的用户介入机会
4. 展示决策依据和推理过程
5. 保持界面简洁直观 