# React 性能优化经验

## 状态管理和副作用

### 1. 避免不必要的 useEffect
- 不要使用 `useEffect` 来同步可以直接通过 props 传递的状态
- 只在真正需要处理副作用时使用（如 API 调用、订阅事件等）
- 当需要在多个组件间共享状态时，优先考虑状态管理工具（如 Redux）而不是靠 `useEffect` 同步

### 2. 状态设计原则
- 遵循单向数据流，让数据流向清晰可预测
- 避免重复或冗余的状态，减少状态同步的需求
- 将状态尽可能放在最近的共同父组件中

### 3. 实际案例
Navigation 组件中的路径同步优化：
```jsx
// 优化前：使用 useEffect 同步状态
const [searchValue, setSearchValue] = useState(currentPath);
useEffect(() => {
  setSearchValue(currentPath);
}, [currentPath]);

// 优化后：直接使用 props
<AutoComplete value={currentPath} />
```

优化效果：
- 减少了组件的复杂度
- 避免了额外的状态更新和副作用
- 减少了不必要的渲染
- 代码更清晰，更易维护
- 减少了潜在的 bug（如状态不同步）

## 最佳实践总结
1. 性能优化应该是开发初期就要考虑的事情，而不是等到出现问题再优化
2. 在选择实现方案时，应该优先考虑性能影响，选择最简单且高效的方案
3. 代码简洁通常意味着更好的性能和可维护性
