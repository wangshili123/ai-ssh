# ä¸Šä¼ åŠŸèƒ½ç»„ä»¶è®¾è®¡è¯¦ç»†è¯´æ˜

## ğŸ¨ ç»„ä»¶æ¶æ„è®¾è®¡

### 1. ç»„ä»¶å±‚æ¬¡ç»“æ„

```
Upload Feature Components
â”œâ”€â”€ Transfer (å…±ç”¨ç»„ä»¶)
â”‚   â”œâ”€â”€ TransferHistory        # ç»Ÿä¸€ä¼ è¾“å†å²
â”‚   â”œâ”€â”€ TransferManager        # ç»Ÿä¸€ä»»åŠ¡ç®¡ç†
â”‚   â”œâ”€â”€ TransferProgress       # ç»Ÿä¸€è¿›åº¦æ˜¾ç¤º
â”‚   â””â”€â”€ TransferNotification   # ç»Ÿä¸€é€šçŸ¥ç»„ä»¶
â”œâ”€â”€ Upload (ä¸Šä¼ ä¸“ç”¨)
â”‚   â”œâ”€â”€ UploadDialog          # ä¸Šä¼ é…ç½®å¯¹è¯æ¡†
â”‚   â””â”€â”€ UploadDropZone        # æ‹–æ‹½ä¸Šä¼ åŒºåŸŸ
â””â”€â”€ Download (ä¸‹è½½ä¸“ç”¨)
    â””â”€â”€ DownloadDialog        # ä¸‹è½½é…ç½®å¯¹è¯æ¡†
```

## ğŸ“‹ è¯¦ç»†ç»„ä»¶è®¾è®¡

### 1. TransferHistory ç»„ä»¶

**åŠŸèƒ½æè¿°**ï¼šç»Ÿä¸€æ˜¾ç¤ºä¸Šä¼ å’Œä¸‹è½½å†å²è®°å½•

**é‡æ„è¦ç‚¹**ï¼š
- åŸºäºç°æœ‰DownloadHistoryç»„ä»¶
- æ·»åŠ ä¼ è¾“ç±»å‹åˆ—æ˜¾ç¤ºï¼ˆä¸Šä¼ /ä¸‹è½½ï¼‰
- æ”¯æŒæŒ‰ç±»å‹ç­›é€‰
- ç»Ÿä¸€çš„æ“ä½œæŒ‰é’®ï¼ˆé‡è¯•ã€æ‰“å¼€æ–‡ä»¶å¤¹ç­‰ï¼‰

**æ–°å¢åŠŸèƒ½**ï¼š
```typescript
interface TransferHistoryProps {
  visible: boolean;
  onClose: () => void;
  filterType?: 'all' | 'download' | 'upload'; // æ–°å¢ç­›é€‰
}
```

**UIæ”¹è¿›**ï¼š
- æ·»åŠ ä¼ è¾“ç±»å‹å›¾æ ‡ï¼ˆğŸ“¥ä¸‹è½½ ğŸ“¤ä¸Šä¼ ï¼‰
- æ·»åŠ ç±»å‹ç­›é€‰æ ‡ç­¾é¡µ
- ç»Ÿä¸€çš„çŠ¶æ€æ ‡ç­¾å’Œè¿›åº¦æ˜¾ç¤º

### 2. TransferManager ç»„ä»¶

**åŠŸèƒ½æè¿°**ï¼šç»Ÿä¸€ç®¡ç†æ‰€æœ‰ä¼ è¾“ä»»åŠ¡

**é‡æ„è¦ç‚¹**ï¼š
- åŸºäºç°æœ‰DownloadManagerç»„ä»¶
- æ”¯æŒä¸Šä¼ å’Œä¸‹è½½ä»»åŠ¡æ··åˆæ˜¾ç¤º
- ç»Ÿä¸€çš„æ‰¹é‡æ“ä½œï¼ˆå…¨éƒ¨æš‚åœ/æ¢å¤/å–æ¶ˆï¼‰

**æ–°å¢åŠŸèƒ½**ï¼š
```typescript
interface TransferManagerProps {
  visible: boolean;
  onClose: () => void;
  defaultTab?: 'all' | 'download' | 'upload'; // é»˜è®¤æ˜¾ç¤ºæ ‡ç­¾
}
```

**UIå¸ƒå±€**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ä¼ è¾“ç®¡ç†                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å…¨éƒ¨] [ä¸‹è½½] [ä¸Šä¼ ]                 â”‚ <- æ ‡ç­¾é¡µ
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç»Ÿè®¡ä¿¡æ¯: æ€»è®¡3 ä¸‹è½½1 ä¸Šä¼ 2          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¥ downloading file1.txt             â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80% 1.2MB/s              â”‚
â”‚                                     â”‚
â”‚ ğŸ“¤ uploading file2.jpg              â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60% 800KB/s              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æ¸…é™¤å·²å®Œæˆ] [å…¨éƒ¨æš‚åœ] [å…¨éƒ¨æ¢å¤]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. TransferProgress ç»„ä»¶

**åŠŸèƒ½æè¿°**ï¼šç»Ÿä¸€çš„ä¼ è¾“è¿›åº¦æ˜¾ç¤ºç»„ä»¶

**é‡æ„è¦ç‚¹**ï¼š
- åŸºäºç°æœ‰DownloadProgressç»„ä»¶
- æ ¹æ®ä¼ è¾“ç±»å‹æ˜¾ç¤ºä¸åŒå›¾æ ‡å’Œæ–‡æ¡ˆ
- ä¿æŒç›¸åŒçš„äº¤äº’é€»è¾‘

**é€‚é…é€»è¾‘**ï¼š
```typescript
interface TransferProgressProps {
  task: TransferTask; // ç»Ÿä¸€çš„ä»»åŠ¡æ¥å£
  onPause?: (taskId: string) => void;
  onResume?: (taskId: string) => void;
  onCancel?: (taskId: string) => void;
}

// æ ¹æ®ä»»åŠ¡ç±»å‹æ˜¾ç¤ºä¸åŒå†…å®¹
const getTransferIcon = (type: 'download' | 'upload') => {
  return type === 'download' ? <DownloadOutlined /> : <UploadOutlined />;
};

const getTransferText = (type: 'download' | 'upload', status: string) => {
  const prefix = type === 'download' ? 'ä¸‹è½½' : 'ä¸Šä¼ ';
  return `${prefix}${getStatusText(status)}`;
};
```

### 4. UploadDialog ç»„ä»¶

**åŠŸèƒ½æè¿°**ï¼šä¸Šä¼ æ–‡ä»¶é…ç½®å¯¹è¯æ¡†

**è®¾è®¡è¦ç‚¹**ï¼š
- å¤ç”¨DownloadDialogçš„UIæ¡†æ¶å’Œæ ·å¼
- æ–‡ä»¶é€‰æ‹© + æ‹–æ‹½æ”¯æŒ
- è¿œç¨‹è·¯å¾„é…ç½®
- æ‰¹é‡ä¸Šä¼ æ”¯æŒ

**ç»„ä»¶æ¥å£**ï¼š
```typescript
interface UploadDialogProps {
  visible: boolean;
  selectedFiles?: File[];
  defaultRemotePath?: string;
  sessionInfo: SessionInfo;
  onConfirm: (config: UploadConfig) => void;
  onCancel: () => void;
}

interface UploadConfig {
  remotePath: string;
  overwrite: boolean;
  preservePermissions: boolean;
  sessionId: string;
  // ä¼˜åŒ–é€‰é¡¹
  useCompression?: boolean;
  compressionMethod?: 'auto' | 'gzip' | 'bzip2' | 'xz' | 'none';
  useParallelUpload?: boolean;
  maxParallelChunks?: number;
}
```

**UIå¸ƒå±€è®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¤ ä¸Šä¼ æ–‡ä»¶                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–‡ä»¶é€‰æ‹©åŒºåŸŸ                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“ æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„æˆ–ç‚¹å‡»é€‰æ‹©        â”‚ â”‚
â”‚ â”‚                                 â”‚ â”‚
â”‚ â”‚ å·²é€‰æ‹©æ–‡ä»¶ï¼š                     â”‚ â”‚
â”‚ â”‚ âœ“ document.pdf (2.3MB)          â”‚ â”‚
â”‚ â”‚ âœ“ image.jpg (1.8MB)             â”‚ â”‚
â”‚ â”‚ [+ æ·»åŠ æ›´å¤šæ–‡ä»¶]                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ è¿œç¨‹ä¿å­˜è·¯å¾„                         â”‚
â”‚ [/home/user/uploads/] [ğŸ“æµè§ˆ]       â”‚
â”‚                                     â”‚
â”‚ ä¸Šä¼ é€‰é¡¹                            â”‚
â”‚ â˜‘ è¦†ç›–åŒåæ–‡ä»¶                      â”‚
â”‚ â˜‘ ä¿æŒæ–‡ä»¶æƒé™                      â”‚
â”‚                                     â”‚
â”‚ ğŸ”§ ä¸Šä¼ ä¼˜åŒ–é€‰é¡¹ (å±•å¼€/æ”¶èµ·)          â”‚
â”‚ â”œâ”€ â˜‘ æ™ºèƒ½å‹ç¼©ä¼ è¾“                   â”‚
â”‚ â””â”€ â˜‘ å¹¶è¡Œåˆ†å—ä¸Šä¼                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              [å–æ¶ˆ] [å¼€å§‹ä¸Šä¼ ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. UploadDropZone ç»„ä»¶

**åŠŸèƒ½æè¿°**ï¼šæ‹–æ‹½ä¸Šä¼ åŒºåŸŸç»„ä»¶

**è®¾è®¡è¦ç‚¹**ï¼š
- æ”¯æŒæ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‹–æ‹½
- æ–‡ä»¶ç±»å‹è¿‡æ»¤
- æ‹–æ‹½çŠ¶æ€è§†è§‰åé¦ˆ
- å¯åµŒå…¥åˆ°å…¶ä»–ç»„ä»¶ä¸­

**ç»„ä»¶æ¥å£**ï¼š
```typescript
interface UploadDropZoneProps {
  onFilesSelected: (files: File[]) => void;
  accept?: string;              // æ¥å—çš„æ–‡ä»¶ç±»å‹
  maxFiles?: number;            // æœ€å¤§æ–‡ä»¶æ•°é‡
  maxSize?: number;             // å•æ–‡ä»¶æœ€å¤§å¤§å°
  disabled?: boolean;
  className?: string;
  children?: React.ReactNode;   // è‡ªå®šä¹‰å†…å®¹
}
```

**çŠ¶æ€è®¾è®¡**ï¼š
```typescript
interface DropZoneState {
  isDragOver: boolean;          // æ‹–æ‹½æ‚¬åœçŠ¶æ€
  isDragActive: boolean;        // æ‹–æ‹½æ¿€æ´»çŠ¶æ€
  selectedFiles: File[];        // å·²é€‰æ‹©æ–‡ä»¶
  errors: string[];             // éªŒè¯é”™è¯¯
}
```

**UIçŠ¶æ€å˜åŒ–**ï¼š
```css
/* é»˜è®¤çŠ¶æ€ */
.upload-drop-zone {
  border: 2px dashed #d9d9d9;
  background: #fafafa;
}

/* æ‹–æ‹½æ‚¬åœçŠ¶æ€ */
.upload-drop-zone.drag-over {
  border-color: #1890ff;
  background: #e6f7ff;
}

/* æ‹–æ‹½æ¿€æ´»çŠ¶æ€ */
.upload-drop-zone.drag-active {
  border-color: #52c41a;
  background: #f6ffed;
}
```

## ğŸ”„ ç»„ä»¶é‡æ„ç­–ç•¥

### 1. æ¸è¿›å¼é‡æ„

**ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºTransferåŸºç¡€ç»„ä»¶**
- å¤åˆ¶ç°æœ‰Downloadç»„ä»¶
- é‡å‘½åä¸ºTransferç»„ä»¶
- æ·»åŠ typeå‚æ•°æ”¯æŒ

**ç¬¬äºŒæ­¥ï¼šé€‚é…åŒæ¨¡å¼æ˜¾ç¤º**
- æ ¹æ®typeæ˜¾ç¤ºä¸åŒå›¾æ ‡å’Œæ–‡æ¡ˆ
- ä¿æŒåŸæœ‰äº¤äº’é€»è¾‘ä¸å˜
- æ·»åŠ ç±»å‹ç­›é€‰åŠŸèƒ½

**ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºUploadä¸“ç”¨ç»„ä»¶**
- åŸºäºTransferç»„ä»¶æ¡†æ¶
- å®ç°ä¸Šä¼ ç‰¹æœ‰åŠŸèƒ½
- é›†æˆæ‹–æ‹½æ”¯æŒ

### 2. å‘åå…¼å®¹ä¿è¯

**ä¿æŒç°æœ‰APIä¸å˜**ï¼š
```typescript
// ç°æœ‰çš„DownloadManagerä»ç„¶å¯ç”¨
<DownloadManager visible={visible} onClose={onClose} />

// æ–°çš„TransferManagerå‘åå…¼å®¹
<TransferManager 
  visible={visible} 
  onClose={onClose}
  defaultTab="download" // é»˜è®¤åªæ˜¾ç¤ºä¸‹è½½
/>
```

**æ¸è¿›å¼è¿ç§»**ï¼š
- ç°æœ‰ä»£ç ç»§ç»­ä½¿ç”¨Downloadç»„ä»¶
- æ–°åŠŸèƒ½ä½¿ç”¨Transferç»„ä»¶
- é€æ­¥è¿ç§»ç°æœ‰ä»£ç åˆ°Transferç»„ä»¶

### 3. æ ·å¼å¤ç”¨ç­–ç•¥

**CSSç±»å‘½åè§„èŒƒ**ï¼š
```css
/* é€šç”¨ä¼ è¾“æ ·å¼ */
.transfer-dialog { }
.transfer-progress { }
.transfer-manager { }

/* ä¸‹è½½ä¸“ç”¨æ ·å¼ */
.download-dialog { }
.download-specific { }

/* ä¸Šä¼ ä¸“ç”¨æ ·å¼ */
.upload-dialog { }
.upload-drop-zone { }
```

**æ ·å¼ç»§æ‰¿å…³ç³»**ï¼š
- Transferç»„ä»¶ç»§æ‰¿Downloadç»„ä»¶çš„åŸºç¡€æ ·å¼
- Uploadç»„ä»¶å¤ç”¨Transferç»„ä»¶çš„æ ·å¼æ¡†æ¶
- åªä¿®æ”¹å¿…è¦çš„é¢œè‰²å’Œå›¾æ ‡å·®å¼‚

## ğŸ“± å“åº”å¼è®¾è®¡

### ç§»åŠ¨ç«¯é€‚é…
```css
@media (max-width: 768px) {
  .upload-dialog {
    width: 90vw !important;
    margin: 20px;
  }
  
  .upload-drop-zone {
    min-height: 120px;
    padding: 16px;
  }
  
  .file-list {
    max-height: 200px;
    overflow-y: auto;
  }
}
```

### è§¦æ‘¸è®¾å¤‡ä¼˜åŒ–
- å¢å¤§ç‚¹å‡»åŒºåŸŸ
- ä¼˜åŒ–æ‹–æ‹½æ‰‹åŠ¿
- ç®€åŒ–å¤æ‚äº¤äº’

## ğŸ¯ ç”¨æˆ·ä½“éªŒè®¾è®¡

### 1. ä¸€è‡´æ€§åŸåˆ™
- ä¸ä¸‹è½½åŠŸèƒ½ä¿æŒç›¸åŒçš„è§†è§‰é£æ ¼
- ç»Ÿä¸€çš„äº¤äº’æ¨¡å¼å’Œåé¦ˆæœºåˆ¶
- ç›¸åŒçš„é”™è¯¯å¤„ç†å’Œæç¤ºæ–¹å¼

### 2. æ˜“ç”¨æ€§ä¼˜åŒ–
- æ™ºèƒ½é»˜è®¤å€¼è®¾ç½®
- æ¸…æ™°çš„æ“ä½œæŒ‡å¼•
- åŠæ—¶çš„çŠ¶æ€åé¦ˆ

### 3. æ€§èƒ½è€ƒè™‘
- å¤§æ–‡ä»¶åˆ—è¡¨è™šæ‹Ÿæ»šåŠ¨
- å›¾ç‰‡é¢„è§ˆæ‡’åŠ è½½
- è¿›åº¦æ›´æ–°èŠ‚æµå¤„ç†
